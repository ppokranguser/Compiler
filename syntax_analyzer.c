#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_STACK_SIZE 100
#define MAX_INPUT_SIZE 1000
#define MAX_SYMBOL_LENGTH 100
#define MAX_CHILDREN 10

//TreeNode 구조체 선언 : 구조체이름(symbol)과 자식노드(children)들로 정의
typedef struct TreeNode {
    char symbol[MAX_SYMBOL_LENGTH];
    struct TreeNode* children[MAX_CHILDREN];
    int childCount;
} TreeNode;

//createNode 함수 선언 : 구조체이름(symbol)을 인자로 넘겨받아 new Node를 생성하는 함수
TreeNode* createNode(const char* symbol) {
    TreeNode* newNode = (TreeNode*)malloc(sizeof(TreeNode));
    strncpy(newNode->symbol, symbol, MAX_SYMBOL_LENGTH);
    for (int i = 0; i < MAX_CHILDREN; i++) {
        newNode->children[i] = NULL;
    }
    newNode->childCount = 0;
    return newNode;
}

//printParseTree 함수 선언 : parsetree를 시각화하여 출력하는 함수
void printParseTreePretty(TreeNode* root, int depth, int isLast) {
    if (root == NULL) return;
    for (int i = 0; i < depth; i++) {
        printf("   ");
    }
    if (depth > 0) {
        if (isLast) {
            printf("└──");
        }
        else {
            printf("├──");
        }
    }
    printf(" %s\n", root->symbol);
    for (int i = 0; i < root->childCount; i++) {
        printParseTreePretty(root->children[i], depth + 1, i == root->childCount - 1);
    }
}

//Action 구조체 선언 : 파싱테이블의 action(s->shift, r->reduce, a->accept)과 state 상태정보를 가짐
typedef struct {
    char action;
    int state;
} Action;

//actionTable 선언 : SLR parsing에 필요한 action 테이블
Action actionTable[75][21] = {
    {{'s', 4}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r', 3}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'a', 0}},
    {{'s', 4}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r', 3}},
    {{'s', 4}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r', 3}},
    {{' ', 0}, {'s', 7}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r', 1}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r', 2}},
    {{' ', 0}, {' ', 0}, {'s', 9}, {'s',11}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',10},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'s',12}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'r', 4}, {'r', 4}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r', 4}, {' ', 0}, {'r', 4}, {'r', 4}, {' ', 0},{' ', 0}, {'r', 4}, {'r', 4}},
    //10
    {{'s',14}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',20}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',23}, {' ', 0}, {' ', 0}, {'s',17}, {'s',18},{'s',19}, {' ', 0}, {' ', 0}, {'s',22},   {' ', 0}, {'s',24},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'r', 5}, {'r', 5}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r', 5}, {' ', 0}, {'r', 5}, {'r', 5}, {' ', 0},{' ', 0}, {'r', 5}, {'r', 5}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'s',25}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',26}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r', 6}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r', 7}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r', 8}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r', 9}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',10}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    //20
    {{' ', 0}, {' ', 0}, {'r',12}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'s',27}, {' ', 0}, {' ', 0},   {'r',12}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',14}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',14}, {'s',28}, {' ', 0},   {'r',14}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',23}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',22},   {' ', 0}, {'s',24},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',16}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',16}, {'r',16}, {' ', 0},   {'r',16}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',17}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',17}, {'r',17}, {' ', 0},   {'r',17}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{'s',30}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',22}, {' ', 0},{' ', 0}, {' ', 0}, {'s',32}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',23}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',22},   {' ', 0}, {'s',24},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',23}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',22},   {' ', 0}, {'s',24},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'s',35}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    //30
    {{'s',42}, {'s',43}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}, {'s',40}, {'s',41}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',19}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'s',44}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',11}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',11}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',13}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',13}, {' ', 0}, {' ', 0},   {'r',13}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'r',15}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',15}, {'r',15}, {' ', 0},   {'r',15}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'s',46}, {' ', 0}},
    {{'s',42}, {'s',43}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}, {'s',40}, {'s',41}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}},
    {{'r',25}, {'r',25}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',25}, {' ', 0}, {'r',25}, {'r',25}, {' ', 0},{' ', 0}, {'r',25}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'s',48}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    //40
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',49},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {'s',50},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',51}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {'s',11}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',52}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'s',53}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {'s',23}, {' ', 0}, {' ', 0}, {'s',17}, {'s',18},{'s',19}, {' ', 0}, {' ', 0}, {'s',22},   {' ', 0}, {'s',24},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',23}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {'r',23}, {' ', 0}},
    {{'r',26}, {'r',26}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',26}, {' ', 0}, {'r',26}, {'r',26}, {' ', 0},{' ', 0}, {'r',26}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{'s',56}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ',  }, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    //50
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{'s',56}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {'s', 9}, {'s',11}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',22}, {' ', 0},{' ', 0}, {' ', 0}, {'s',32}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'r',18}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {'r',18}},
    {{' ', 0}, {' ', 0}, {'s',59}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'s',60}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {'s',61},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',30}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {'r',30},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'s',62}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {'s',61},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',21}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',33}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    //60
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{'s',63}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{'s',64}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{'s',65}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'s',42}, {'s',43}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}, {'s',40}, {'s',41}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {'r',29}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {'r',29},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'s',42}, {'s',43}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}, {'s',40}, {'s',41}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'s',68}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'s',69}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'r',32}, {'r',32}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',32}, {' ', 0}, {'r',32}, {'r',32}, {' ', 0},{'s',71}, {'r',32}, {' ', 0}},
    {{'r',28}, {'r',28}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',28}, {' ', 0}, {'r',28}, {'r',28}, {' ', 0},{' ', 0}, {'r',28}, {' ', 0}},
    //70
    {{'r',27}, {'r',27}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',27}, {' ', 0}, {'r',27}, {'r',27}, {' ', 0},{' ', 0}, {'r',27}, {' ', 0}},
    {{' ', 0}, {' ',  }, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{'s',72}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'s',42}, {'s',42}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}, {'s',40}, {'s',41}, {' ', 0},{' ', 0}, {'r',24}, {' ', 0}},
    {{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'s',74}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}},
    {{'r',31}, {'r',31}, {' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},{' ', 0}, {' ', 0}, {' ', 0}, {' ', 0},   {' ', 0}, {' ', 0},{' ', 0}, {'r',31}, {' ', 0}, {'r',31}, {'r',31}, {' ', 0},{' ', 0}, {'r',31}, {' ', 0}}



};

//gotoTable 선언 : SLR parsing에 필요한 goto 테이블
int gotoTable[75][16] = {

    {-1, 1, 2,-1,-1,-1,-1,-1, 3,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1, 5, 2,-1,-1,-1,-1,-1, 3,-1,  -1,-1,-1,-1,-1,-1},
    {-1, 6, 2,-1,-1,-1,-1,-1, 3,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1, 8,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //10
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,13,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,15,16,20,21,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //20
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,29,20,21,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  31,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,33,20,21,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,34,21,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //30
    {-1,-1,38,39,-1,-1,-1,-1,-1,-1,  -1,36,37,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,45},
    {-1,-1,38,39,-1,-1,-1,-1,-1,-1,  -1,47,37,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //40
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1, 8,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,54,16,20,21,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,55,-1,-1},
    //50
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,57,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  58,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //60
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,38,39,-1,-1,-1,-1,-1,-1,  -1,66,37,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,38,39,-1,-1,-1,-1,-1,-1,  -1,67,37,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,70,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    //70
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,38,39,-1,-1,-1,-1,-1,-1,  -1,73,37,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,  -1,-1,-1,-1,-1,-1},


};

//getSymbolIndex 함수 선언 : parsing table의 인덱스를 구하기 위해 모든 nonterminal을 정수값에 대응
int getSymbolIndex(const char* symbol) {
    if (strcmp(symbol, "vtype") == 0)       return 0;
    if (strcmp(symbol, "id") == 0)          return 1;
    if (strcmp(symbol, "semi") == 0)        return 2;
    if (strcmp(symbol, "assign") == 0)      return 3;
    if (strcmp(symbol, "literal") == 0)     return 4;
    if (strcmp(symbol, "character") == 0)   return 5;
    if (strcmp(symbol, "boolstr") == 0)     return 6;
    if (strcmp(symbol, "addsub") == 0)      return 7;
    if (strcmp(symbol, "multdiv") == 0)     return 8;
    if (strcmp(symbol, "lparen") == 0)      return 9;
    if (strcmp(symbol, "rparen") == 0)      return 10;
    if (strcmp(symbol, "num") == 0)         return 11;
    if (strcmp(symbol, "lbrace") == 0)      return 12;
    if (strcmp(symbol, "rbrace") == 0)      return 13;
    if (strcmp(symbol, "comma") == 0)       return 14;
    if (strcmp(symbol, "if") == 0)          return 15;
    if (strcmp(symbol, "while") == 0)       return 16;
    if (strcmp(symbol, "comp") == 0)        return 17;
    if (strcmp(symbol, "else") == 0)        return 18;
    if (strcmp(symbol, "return") == 0)      return 19;
    if (strcmp(symbol, "$") == 0)           return 20;
    return -1;
}

//getSymbolIndex 함수 선언 : parsing table의 인덱스를 구하기 위해 모든 terminal을 정수값에 대응
int getGotoIndex(const char* nonTerminal) {
    if (strcmp(nonTerminal, "START") == 0)      return 0;
    if (strcmp(nonTerminal, "CODE") == 0)       return 1;
    if (strcmp(nonTerminal, "VDECL") == 0)      return 2;
    if (strcmp(nonTerminal, "ASSIGN") == 0)     return 3;
    if (strcmp(nonTerminal, "RHS") == 0)        return 4;
    if (strcmp(nonTerminal, "EXPR") == 0)       return 5;
    if (strcmp(nonTerminal, "TERM") == 0)       return 6;
    if (strcmp(nonTerminal, "FACTOR") == 0)     return 7;
    if (strcmp(nonTerminal, "FDECL") == 0)      return 8;
    if (strcmp(nonTerminal, "ARG") == 0)        return 9;
    if (strcmp(nonTerminal, "MOREARGS") == 0)   return 10;
    if (strcmp(nonTerminal, "BLOCK") == 0)      return 11;
    if (strcmp(nonTerminal, "STMT") == 0)       return 12;
    if (strcmp(nonTerminal, "COND") == 0)       return 13;
    if (strcmp(nonTerminal, "ELSE") == 0)       return 14;
    if (strcmp(nonTerminal, "RETURN") == 0)     return 15;
    return -1;
}

// StackElement 구조체 선언 : 스택에는 state와 symbol 값이 저장
typedef struct {
    int state;
    char symbol[MAX_SYMBOL_LENGTH];
} StackElement;

//스택의 크기를 결정
StackElement stack[MAX_STACK_SIZE];
int top = -1;

//push 함수 선언 : stack[top]에 값을 넣기 위한 함수
void push(int state, const char* symbol) {
    if (top < MAX_STACK_SIZE - 1) {
        top++;
        stack[top].state = state;
        strncpy(stack[top].symbol, symbol, MAX_SYMBOL_LENGTH);
    }
    else {
        printf("Stack overflow\n");
        exit(1);
    }
}

//pop 함수 선언 : stack[top] 값을 가져오기 위한 함수
void pop(int count) {
    if (top >= count - 1) {
        top -= count;
    }
    else {
        printf("Stack underflow\n");
        exit(1);
    }
}



int main() {
    char input[MAX_INPUT_SIZE];
    int i = 0;
    int state;
    char* tokens[100];
    int token_count = 0;
    // 각 토큰의 시작 위치를 저장하는 배열 추가
    int tokenPositions[100];

    FILE* file;
    char buffer[256];

    // 파일 열기 (읽기 모드)
    file = fopen("input.txt", "r");
    if (file == NULL) {
        perror("파일을 열 수 없습니다.");
        return 1;
    }

    // 파일에서 문자열 읽기
    while (fgets(input, sizeof(input), file) != NULL) {
    }

    fclose(file);

    // 개행 문자 제거
    input[strcspn(input, "\n")] = '\0';

    // 문자열을 공백으로 분할
    // 입력의 끝을 표시하는 심볼 추가
    strcat(input, " $");
    char* token = strtok(input, " ");
    while (token != NULL && token_count < 100) {
        tokens[token_count] = token;
        tokenPositions[token_count] = token - input;  // 토큰의 시작 위치를 저장
        token_count++;
        token = strtok(NULL, " ");
    }

    //가장 먼저 stack에 state = 0과 $를 push
    push(0, "$");

    TreeNode* parseTree = NULL;
    TreeNode* nodeStack[MAX_STACK_SIZE];
    int nodeTop = -1;

    i = 0;

    while (i < token_count) { //토큰화한 것을 차례대로 검사
        state = stack[top].state;
        const char* symbol = tokens[i];
        int symbolIndex = getSymbolIndex(symbol);

        if (symbolIndex == -1) {  //잘못된 terminal 값이 input됐을 경우 invaalid symbol 출력
            printf("Invalid symbol '%s'\n", symbol);
            exit(1);
        }
        //action 테이블 값을 가져온다
        Action action = actionTable[state][symbolIndex];

        //action이 s(shift)라면?
        if (action.action == 's') {
            push(action.state, symbol); //state와 symbol값을 stack에 저장
            nodeStack[++nodeTop] = createNode(symbol); //Node 생성
            i++;
        }
        //action이 r(reduce)라면?
        else if (action.action == 'r') {
            TreeNode* newNode = NULL;
            int numChildren;
            //reduce 할 때 필요한 production rule
            switch (action.state) {
            case 0: // START -> CODE
                newNode = createNode("START");
                numChildren = 1;
                break;
            case 1: // CODE -> VDECL CODE
                newNode = createNode("CODE");
                numChildren = 2;
                break;
            case 2: // CODE -> FDECL CODE
                newNode = createNode("CODE");
                numChildren = 2;
                break;
            case 3: // CODE -> ϵ
                newNode = createNode("CODE");
                numChildren = 0;
                break;
            case 4: // VDECL -> vtype id semi 
                newNode = createNode("VDECL");
                numChildren = 3;
                break;
            case 5: // VDECL -> vtype ASSIGN semi
                newNode = createNode("VDECL");
                numChildren = 3;
                break;
            case 6: // ASSIGN -> id assign RHS
                newNode = createNode("ASSIGN");
                numChildren = 3;
                break;
            case 7: // RHS -> EXPR
                newNode = createNode("RHS");
                numChildren = 1;
                break;
            case 8: // RHS -> literal
                newNode = createNode("RHS");
                numChildren = 1;
                break;
            case 9: // RHS -> character
                newNode = createNode("RHS");
                numChildren = 1;
                break;
            case 10: // RHS -> boolstr
                newNode = createNode("RHS");
                numChildren = 1;
                break;
            case 11: // EXPR -> TERM addsub EXPR
                newNode = createNode("EXPR");
                numChildren = 3;
                break;
            case 12: // EXPR -> TERM
                newNode = createNode("EXPR");
                numChildren = 1;
                break;
            case 13: // TERM -> FACTOR multdiv TERM
                newNode = createNode("TERM");
                numChildren = 3;
                break;
            case 14: // TERM -> FACTOR
                newNode = createNode("TERM");
                numChildren = 1;
                break;
            case 15: // FACTOR -> lparen EXPR rparen
                newNode = createNode("FACTOR");
                numChildren = 3;
                break;
            case 16: // FACTOR -> id
                newNode = createNode("FACTOR");
                numChildren = 1;
                break;
            case 17: // FACTOR -> num
                newNode = createNode("FACTOR");
                numChildren = 1;
                break;
            case 18: // FDECL -> vtype id lparen ARG rparen lbrace BLOCK RETURN rbrace
                newNode = createNode("FDECL");
                numChildren = 9;
                break;
            case 19: // ARG -> vtype id MOREARGS 
                newNode = createNode("ARG");
                numChildren = 3;
                break;
            case 20: // ARG -> ϵ
                newNode = createNode("ARG");
                numChildren = 0;
                break;
            case 21: // MOREARGS -> comma vtype id MOREARGS 
                newNode = createNode("MOREARGS");
                numChildren = 4;
                break;
            case 22: // MOREARGS -> ϵ
                newNode = createNode("MOREARGS");
                numChildren = 0;
                break;
            case 23: // BLOCK -> STMT BLOCK
                newNode = createNode("BLOCK");
                numChildren = 2;
                break;
            case 24: // BLOCK -> ϵ
                newNode = createNode("BLOCK");
                numChildren = 0;
                break;
            case 25: // STMT -> VDECL
                newNode = createNode("STMT");
                numChildren = 1;
                break;
            case 26: // STMT -> ASSIGN semi
                newNode = createNode("STMT");
                numChildren = 2;
                break;
            case 27: // STMT -> if lparen COND rparen lbrace BLOCK rbrace ELSE
                newNode = createNode("STMT");
                numChildren = 8;
                break;
            case 28: // STMT -> while lparen COND rparen lbrace BLOCK rbrace
                newNode = createNode("STMT");
                numChildren = 7;
                break;
            case 29: // COND -> COND comp boolstr 
                newNode = createNode("COND");
                numChildren = 3;
                break;
            case 30: // COND -> boolstr
                newNode = createNode("COND");
                numChildren = 1;
                break;
            case 31: // ELSE -> else lbrace BLOCK rbrace
                newNode = createNode("ELSE");
                numChildren = 4;
                break;
            case 32: // ELSE -> ϵ
                newNode = createNode("ELSE");
                numChildren = 0;
                break;
            case 33: // RETURN -> return RHS semi
                newNode = createNode("RETURN");
                numChildren = 3;
                break;
            default: //잘못된 생성규칙
                printf("Invalid reduction\n");
                exit(1);
            }
            //production rule의 right side의 nonterminal과 terminal의 개수의 합만큼 자식 노드생성
            for (int j = numChildren - 1; j >= 0; j--) {
                newNode->children[newNode->childCount++] = nodeStack[nodeTop--];
            }
            //production rule의 right side의 nonterminal과 terminal의 개수의 합만큼 pop진행
            pop(numChildren);
            //pop한 결과가 gotoTable의 state와 Nonterminal로 갔을 대 -1이 아닌 값이 i값이 있으면 i 상태로 이동!
            push(gotoTable[stack[top].state][getGotoIndex(newNode->symbol)], newNode->symbol);
            nodeStack[++nodeTop] = newNode;
        }
        //action이 a(accept)라면?
        else if (action.action == 'a') {
            //현재 nodeStack에 top요소를 parseTree에 저장
            parseTree = nodeStack[nodeTop];
            printf("Input string is accepted.\n");
            //parseTree를 출력
            printParseTreePretty(parseTree, 0, -1);
            break;
        }
        else {
            //action table에 잘못된 값을 참조시에 error 발생 및 몇 번째 토큰에서 error가 발생했는 지 출력
            printf("Error in parsing at token '%s' (token number %d)\n",
                symbol, i + 1, action.action);
            exit(1);
        }
    }

    return 0;
}